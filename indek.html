<div class="tabs">
  <button class="tab-btn active" onclick="showTab('produk')">Produk</button>
  <button class="tab-btn" onclick="showTab('etalase')">Etalase</button>
</div>

<div id="produk" class="tab-content active">
  <h2 id="skincare">üç∞ Skincare</h2>
  <div class="product-grid" id="grid-skincare">Loading...</div>

  <h2 id="baju">üç≥ Baju</h2>
  <div class="product-grid" id="grid-baju">Loading...</div>

  <h2 id="lainlain">üè† Lain-Lain</h2>
  <div class="product-grid" id="grid-lainlain">Loading...</div>
</div>

<div id="etalase" class="tab-content">
  <h2>Etalase</h2>
  <div class="etalase-list">
    <div class="etalase-item" onclick="loadCategory('skincare')">
      <img src="https://via.placeholder.com/60" alt="Skincare"><span>Skincare</span>
    </div>
    <div class="etalase-item" onclick="loadCategory('baju')">
      <img src="https://via.placeholder.com/60" alt="Baju"><span>Baju</span>
    </div>
    <div class="etalase-item" onclick="loadCategory('lainlain')">
      <img src="https://via.placeholder.com/60" alt="Lain-Lain"><span>Lain-Lain</span>
    </div>
  </div>
</div>

<script>
function showTab(tabId) {
  document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
  document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
  document.querySelector(`.tab-btn[onclick="showTab('${tabId}')"]`).classList.add('active');
  document.getElementById(tabId).classList.add('active');
}

function loadCategory(category) {
  showTab('produk');
  fetch(`/api/products?category=${category}`)
    .then(res => res.json())
    .then(products => {
      const grid = document.getElementById('grid-' + category);
      grid.innerHTML = products.map(p => `
        <div class="product-card">
          <img src="${p.image}" alt="${p.name}" class="product-img">
          <div class="product-content">
            <h3>${p.name}</h3>
            <p class="price">Rp${p.price.toLocaleString()}</p>
            <p class="rating">‚≠ê - | ${p.sold}+ terjual</p>
            <a href="${p.link}" class="btn" target="_blank">Beli Sekarang</a>
          </div>
        </div>
      `).join('');
      document.getElementById(category).scrollIntoView({behavior:'smooth'});
    });
}

// Load all categories on page load
['skincare','baju','lainlain'].forEach(loadCategory);
</script>
